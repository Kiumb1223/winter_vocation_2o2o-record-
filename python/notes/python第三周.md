# Python

## 基本数据类型

### 整数类型

 **与数学中的整数的概念一致** 

* 可正可负，**没有取值范围的限制** 
* pow(x,y)函数：计算$ x^{y} $,想算多大算多大

#### 数字类型及操作

**整数类型**     **4种类型表示形式** 

* 十进制：1010，99，217
* 二进制，以0B或0b开头：0B101，-0b010
* 八进制，以0O或0o开头：0o123，-0O456
* 十六进制，以0X或0x开头：0x9a，-0X89

**浮点型类型**    **与数学中实数的概念一致** 

* 带有小数点的数字

* 浮点数取值范围和小数精度都存在限制，但常规计算可忽略

* 取值范为数量级约$ -10^{308}$至$10^{308}$ ，精度数量级$10^{-16}$

  换言之，两个小数的差别最小可以表示到$10^{-16}$数量级，显然**常规运算可以选择忽略**

* **浮点数间运算存在不确定尾数，不是bug**

  ```python
  >>>0.1+0.3
  0.4
  >>>0.1+0.2
  0.30000000000004
  ```

  Python语言中==53==位二进制表示小数部分，约$10^{-16}$

  **二进制表示小数，可以无限接近，但不完全相同**       

  ```python
  #imporve.py
  >>>0.1+0.2==0.3
  False
  >>>round(0.1+0.2,1)==0.3
  True
  ```

  * round(x,d)函数：对X四舍五入，d是小数截取位数
  * 浮点数间运算及比较用round()函数辅助
  * 不确定尾数一般发生在$10^{-16}$左右，round()十分有效

  **浮点数采用科学计数法表述** 

  * 使用字母E或e作为幂的符号，以10为基数，格式如下：

    ​							==<a\>e<b\>==    表示$a*10^{b}$

    namely :==4.3e-3==值为0.0043 			==9.6E5==值为960000.0

    表示比较大或者比较小的数   

**复数类型**     **与数学中复数的概念一致** 

* a+b==j== 被称为复数，其中，a是实部，b是虚部
  * ==j==定义为$\sqrt{-1}$ ，以此为基础，构建数学体系
* `z=1.23e-4+89j`
  * 实部是什么？   `z.real`获得实部
  * 虚部是什么？   `z.imag`获得虚部

**数值运算操作符**    **操作符是完成运算的一种符号体系** 

| 操作符及使用   | 描述                                                         |
| -------------- | ------------------------------------------------------------ |
| X  ==+==   Y   | 加，X与Y之和                                                 |
| X   ==-==   Y  | 减，X与Y之差                                                 |
| X  ==*==   Y   | 乘，X与Y之积                                                 |
| X  ==/==    Y  | 除，X与Y之商  10/3结果为3.333333333333335                    |
| X   ==//==   Y | 整数除，X与Y之整数商   10//3结果是3                          |
| ==+==  X       | X本身                                                        |
| ==-==   Y      | Y的负数                                                      |
| X ==%==  Y     | 余数，模运算   10%3结果是1                                   |
| X   ==**==   Y | 幂运算，$x^{y}$ <br> 当Y是小数时，开方运算 10**0.5结果是$\sqrt{10}$ |

 ==二元操作符有对应的增强赋值操作符== 



<table>
    <tr>
        <td>增强操作符及使用</td>
        <td>描述</td>
    </tr>
    <tr>
        <td rowspan='3'>X  op =  Y</td>
        <td>即 x = x op y 其中，op为二元操作符</td>
    </tr>
    <tr>
        <td>x += y	x -= y	x *= y	x /= y<br>x //= y	x %= y	x **= y</td>
    </tr>
    <tr>
        <td>>>> x = 3.1415<br>>>> x **=3 #与 x = x**3<br>31.006276662836743</td>
    </tr>
</table>

==数字类型的关系==   **类型间可进行混合运算，生成结果为“最宽”类型** 

* 三种类型存在一种逐渐“扩宽”或“变宽”的关系：

  ​								==整数	->	浮点数	->	复数==

* 例如：123+4.0=127.0（整数+浮点数=浮点数）

**数值运算函数**    **一些以函数形式提供的数值运算功能** 

| 函数及使用                         | 描述                                                         |
| ---------------------------------- | ------------------------------------------------------------ |
| abs(x)                             | 绝对值，x的绝对数值<br>**abs(-10.01)结果为10.01**            |
| divmod(x,y)                        | 商余,(x//y,x%y),同时输出商和余数<br>**divmod(10,3)结果为(3,1)** |
| pow(x,y[,z])                       | 幂余，(x*\*y)%z,[...]表示参数z可省略<br>**pow(3,pow(3,99),10000)结果为4587** 求取$3^{3^{99}}$ 的后四位 |
| round(x[,d])                       | 四舍五入，d是保留小数位数，默认值为0<br>**round(-10.123,2)结果为-10.12** |
| max(x~1~ ,x~2~,x~3~,$\dots$，x~n~) | 最大值，返回x~1~,x~2~,x~3~，$\dots$,x~n~中的最大值，n不限<br>**max(1,9,5,4,3)结果为9** |
| min(x~1~ ,x~2~,x~3~,$\dots$，x~n~) | 最小值，返回x~1~,x~2~,x~3~，$\dots$,x~n~中的最小值，n不限<br>**min(1,9,5,4,3)结果为1** |
| int(x)                             | 将x变成整数，舍弃小数部分<br>**int(123.45)结果为123；int("123")结果为123** |
| float(x)                           | 将x变成浮点数，增加小数部分<br>**float(12)结果为12.0；float("1.23")结果为1.23** |
| complex(x)                         | 将x变成复数，增加哦虚数部分<br>**complex(4)结果为4+0j**      |

###### 整数类型的无限范围    浮点数类型的近似无限范围

## 字符串类型

**字符串有2类共4种表示方法** 

* 由一堆单引号或双引号表示，仅表示单行字符串

* 由一对三单引号或三双引号表示，可表示多行字符串

  ```python
  ​```Python
  		语言```  #三单引号形成了字符串，但是它的作用可以成为注释
  ```

* 如果希望在字符串中包含双引号或单引号呢？

  =='这里有个双引号（“”）'==或者=="这里有个单引号('')"==

* 如果希望在字符串中既包括单引号又包括双引号呢？

  ==\`\`\`这里既有单引号('')又有双引号("")\`\`\`==

* 所有Python提供的四种字符串表示方法是存在**冗余**的

  好处：使得单引号和双引号在字符串中的出现变得很好处理，也变得很简单

**字符串的序号** 

==正向递增序号 和 反向递减序号== 

**字符串的使用** 

使用[]获取字符串中的一个或多个字符

* 索引    

* 切片之高级用法：

  **使用[M:N:K]根据步长对字符串切片** 

  * <字符串>[M:N],M缺失表示==至开头== ，N缺失表示==至结尾== 

    `"零一二三四五六七八九十"[:3]`结果是`"零一二"`

  * <字符串>[M:N:K],根据步长K对字符串切片s

    `"零一二三四五六七八九十"[1：8：2]`结果是`"一三五七"`

    `"零一二三四五六七八九十"[::-1]`结果是`"十九八七六五四三二一零"`

    ==这个是字符串逆序== IRPT

**字符串的特殊字符**    ==转义符\\==

* 转义符表达特定字符的本意

  `"这里有个双引号（\"）` 结果为 这里有个双引号（”）

* 转义符形成一些组合，表达一些不可打印的含义

  "\b"回退	"\n"换行（光标移动到下行首）	"\r"回车（光标移动到本行首）

**字符串操作符**   **由0个或多个字符组成的有序字符序列** 

| 操作符及其使用                           | 描述                                    |
| ---------------------------------------- | --------------------------------------- |
| X    ==+==     Y                         | 连接两个字符串X和Y                      |
| n    ==*==     X    或    X   ==*==    n | 复制n次字符串X                          |
| X    ==in==    S                         | 如果X是S的子串，返回True，否则返回False |

**字符串处理函数**   **一些以函数形式提供的字符串处理函数** 

| 函数及使用     | 描述                                                         |
| -------------- | ------------------------------------------------------------ |
| len(X)         | 长度，返回字符串X的长度<br>len("一二三123")结果为6<br>attention:无论**数字、标点符号、英文字母或者是汉字** 都算作一个字符，长度相同 |
| str(x)         | 任意类型X所对应的字符串形式<br>str(1.23)结果为”1.23“  str([1,2])结果为"[1,2]"<Br>attention:eval函数是与之对应的函数 |
| hex(x)或oct(x) | 整数X的十六进制或八进制小写形式字符串<br>hex(425)结果为"0x1a9" oct(425)结果为"0o651" |
| chr(u)         | u为Unicode编码，返回其对应的字符                             |
| ord(x)         | x为字符，返回其对应的Unicode编码                             |

**Unicode编码**    **Python字符串编码方式** 

* 统一字符编码，及覆盖几乎所有字符的编码方式
* 从0到1114111（0x10FFFF）空间，每个编码对应一个字符
* Python字符串中每个字符都是Unicode编码字符

**字符串处理方法**    **一些以方法形式提供的字符串处理功能** 

| 方法即使用                   | 描述                                                         |
| ---------------------------- | ------------------------------------------------------------ |
| str.lower()或str.upper()     | 返回字符串的副本，全部字符小写/大写<br>"AbCdEFGH".lower()结果为"abcdefgh" |
| str.split(sep==None)         | 返回一个列表，由str根据sep被分隔的部分组成<br>"A,B,C,D".split(",")结果为['A','B','C','D'] |
| str.count(Sub)               | 返回字串sub中出现的次数<br>"an apple a day".count("a")结果为4 |
| str.replace(old,new)         | 返回字符串str副本，所有old子串被替换成new<br>"python".replace("n","n123.io")结果为"python123.io" |
| str.center(width[,fillchar]) | 字符串根据宽度width剧中，fillchar可选<br>"python".center(20,"=")结果为"===python\=\==" |
| str.strip(Chars)             | 从str中去掉在其左侧和右侧chars中列出的字符<br>"= python =".strip(" =np")结果为"ytho" |
| str.join(iter)               | 在iter变量除最后元素外每个元素后增加一个str<br>",".join("12345")结果为"1,2,3,4,5"<br>"1,2,3,4,5" #**主要用于字符串的分割** |

**字符串类型的格式化**     **格式化是对字符串进行格式表达的方式** 

* 字符串格式化使用`.format()`方法，用法如下：

  `<模板字符串>.format(<逗号分隔的参数>)` 

* **槽**     **占位信息符**     

  * 使用一对=={}==来表示，只在字符串中有用

  * 字符串中槽{}的默认顺序是**自左向右从0开始计数**   format()中的参数顺序**也是如此** 

  *  format 方法中的参数按照对应的顺序，填到模板字符串的槽中

    进一步我们可以在槽中指定需要添加的参数位置

    `"{1}:计算机{0}的CPU占用率为{2}%".format("2018-10-10","C",10)`

*  format()方法的格式控制    **槽内部对格式化的配置方式** 

  {<参数序号>:<格式控制标记>}

  | ：       | <填充>             | <对齐>                                        | <宽度>           |
  | -------- | ------------------ | --------------------------------------------- | ---------------- |
  | 引导符号 | 用于填充的单个字符 | ==<==左对齐<br>==>== 右对齐<br>==^== 居中对齐 | 槽设定的输出宽度 |

  ```python
  >>>"{0:=^20}".format("PYTHON")
  '=======PYTHON======='
  >>> "{0:*>20}".format("BIT")
  '*****************BIT'
  >>> "{0:10}".format("BIT")
  'BIT       
  ```

  | <,>            | <.精度>                                  | <类型>                                                       |
  | -------------- | ---------------------------------------- | ------------------------------------------------------------ |
  | 数字千位分隔符 | 浮点数小数精度  或<br>字符串最大输出长度 | 整数类型<br>b,c,d,o,x,X<br>浮点数类型<br>e,E,f,%(百分数形式) |

  ```python   
  >>> "{0:b},{0:c},{0:d},{0:o},{0:x}，{0:X}".format(425)
  '110101001,Ʃ,425,651,1a9，1A9'
  #  格式控制符C中是按照Unicode编码的
  >>> "{:,.2f}".format(12345.6789)
  '12,345.68'
  >>> "{0:e},{0:E},{0:f},{0:%}".format(3.14)
  '3.140000e+00,3.140000E+00,3.140000,314.000000%'
  #科学计数法   非科学计数法
  ```

## time库的使用

==time库是Python中处理时间的标准库== 

* 计算机时间的表达

* 提供获取系统时间并格式化输出功能

* 提供系统级精确计时功能，用于程序性能分析

* 格式  		  import time   

  ​					time.<b\>()

==time库包含三类函数== 

* 时间获取：time()	ctime()	gmtime()
* 时间格式化：strftime()    strptime()
* 程序计时：sleep(),perf_counter()

**时间获取** 

| 函数        | 描述                                                         |
| ----------- | ------------------------------------------------------------ |
| time()      | 获取当前时间戳[^1]，即计算机内部时间，浮点数<br>>>>time.time()<br>1579953735.8866737 |
| ctime()[^2] | 获取当前时间并以易读方式表示，返回字符串<br>>>> time.ctime()<br/>'Sat Jan 25 20:07:02 2020' |
| gmtime()    | 获取当前时间，表示为计算机可处理的时间格式[^3]<br>>>> time.gmtime()<br/>time.struct_time(tm_year=2020, tm_mon=1, tm_mday=25, tm_hour=12, tm_min=9, tm_sec=52, tm_wday=5, tm_yday=25, tm_isdst=0) |

[^1]:表示从1970年1月1日0：00开始到当前这一时刻为止的一个以秒为单位的数值
[^2]:time库中获取人类译读方式时间的最简单的函数
[^3]:我们将这种格式称之为struct_time格式

**时间格式化**     **将时间以合理的方式展示出来** 

* 格式化：类似字符串格式化，需要由展示模板
* 展示模板有特定的格式控制符组成
* 用来实现时间格式化的**方法** 为`strftime()`方法

| 函数              | 描述                                                         |
| ----------------- | ------------------------------------------------------------ |
| strftime(tpl,ts)  | tpl是格式化模板字符串，用来定义输出效果<br>ts是计算机内部时间类型变量<BR>>>> time.strftime("%Y-%m-%d %H-%M-%S",t)<br/>'2020-01-25 12-16-36'      #%<char\>为time库格式控制符会有附表 |
| strptime(str,tpl) | str是字符串形式时间值<br>tpl是格式化模板字符串，用来定义输入效果<br>>>> timestr='2020-1-26 14:02:20'<br/>>>> time.strptime(timestr,"%Y-%m-%d %H:%M:%S")<br/>time.struct_time(tm_year=2020, tm_mon=1, tm_mday=26, tm_hour=14, tm_min=2, tm_sec=20, tm_wday=6, tm_yday=26, tm_isdst=-1) |

| 格式化字符串 | 日期/事件说明 | 值范围和实例                  |
| ------------ | ------------- | ----------------------------- |
| %Y           | 年份          | 0000~9999 例如：1900          |
| %m           | 月份          | 01~12 例如：10                |
| %B           | 月份名称      | January~December例如：April   |
| %b           | 月份名称缩写  | Jan~Dec,例如：Apr             |
| %d           | 日期          | 01~31,例如：25                |
| %A           | 星期          | Monday~Sunday 例如：Wednesday |
| %a           | 星期缩写      | Mon~Sun 例如 ： Wed           |
| %H           | 小时（24h制） | 00~23例如12                   |
| %I           | 小时（12h制） | 01~12例如7                    |
| %p           | 上/下午       | AM,PM 例如PM                  |
| %M（大写）   | 分钟          | 00~59 例如55                  |
| %S（大写）   | 秒            | 00~59例如15                   |

 **程序计时**   **程序计时应用广泛** 

* 程序计时指测量起止动作所经历时间的过程
* 测量时间:perf_counter()
* 产生时间:sleep()    让程序休眠或者产生一定时间

| 函数           | 描述                                                         |
| -------------- | ------------------------------------------------------------ |
| perf_counter() | 返回一个CPU级别的精确时间计数值，单位为秒<br>由于这个计数值起点不确定，连续调用差值才有意义<br>\>>>start = time.perf_counter()<br/>318.66599499718114<br/>\>>>end = time.perf_counter()<br/>341.3905185375658<br/>\>>>end - start<br/>22.724523540384666 |
| sleep()        | s拟休眠的时间，单位是秒，可以是浮点数<br>>>> def wait():<br/>	time.sleep(3.3) |

## 文本进度条实例

简单的开始

```python
 #TextProBarV1.py
import time
scale =10
print("{:=^20}".format("执行开始"))
for i in range(scale+1):
    a='*'*i
    b='.'*(scale-i)
    c=(i/scale)*100
    print("{:^3.0f}%[{}->{}]".format(c,a,b))
    time.sleep(0.1)
print("{:=^20}".format("执行结束"))

```

单行动态刷新

* 刷新的本质：用后打印的字符覆盖之前的字符
* 不能换行：print（）需要控制
* 要能回退：打印后光标退回之前的位置\r

```python 
import time
for i in range (101):
	print("\r{:3}%".format(i),end="")   #,end=""实现的是不换行的功能
    time.sleep(0.1)
```

IDLE是程序的开发环境，并不是程序的运行环境，所以将\r功能屏蔽了

完整代码：

```python
import time 
scale=50
print("执行开始".center(scale//2,'-'))
start=time.perf_counter()
for i in range(scale+1):
	a='*'*i
	b='.'*(scale-i)
	c=(i/scale)*100
	dur=time.perf_counter()-start
	print("\r{:^3.0f}%[{}->{}]{:.2f}".format(c,a,b,dur),end='')
	time.sleep(0.1)
print("\n"+"执行结束".center(scale//2,'-'))
```

